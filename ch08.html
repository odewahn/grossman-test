<section xmlns="http://www.w3.org/1999/xhtml" id="using_objects" data-type="chapter" class="pagenumrestart"><h1>Using Objects</h1><aside data-type="sidebar"><h5>In This Chapter</h5><ul><li><p>Objects</p></li><li><p>Built-in objects</p></li></ul></aside><section id="eightdot1_introduction" data-type="sect1"><h1>8.1 Introduction</h1><p>In <a href="#arrays" data-type="xref"/>, we discussed the concept of arrays and
    hashes, additional structures that can be used to store data. In this and
    the following two chapters, we discuss objects.</p></section><section id="eightdot2_objects_and_built-in_objects" data-type="sect1"><h1>8.2 Objects and Built-in Objects</h1><p>So far, we have been writing code that is procedural in nature; that
    is, code whose logical flow starts at the top and works its way to the
    bottom. Any computer program can be written in a procedural manner.
    However, when code gets long, it becomes difficult to debug and maintain.
    It also becomes redundant and dangerous to write the same code over and
    over. The object-oriented approach was created for dealing with these very
    issues. To switch to objects, you must understand why they are useful in
    the first place.</p><p>Imagine a product as complex as Microsoft Word. To produce it, a
    team of Microsoft programmers had to write millions of lines of code, with
    hundreds of people working on the code at the same time. To support
    simultaneous development, the code was segmented by functionality.
    Understanding how such complex products get subdivided into manageable
    pieces requires that we first understand the building blocks of such code.
    These building blocks in Ruby are <em>classes</em> that define
    <em>objects</em>.</p><section id="eightdot2dot1_objects" data-type="sect2"><h2>8.2.1 Objects</h2><p>Objects and object-oriented programming simplify the
      implementation of large programs. If you work on a program by yourself,
      it is up to you to organize your work. If you work with 100 other
      programmers, then everything must be nicely compartmentalized;
      otherwise, each programmer will constantly step on the other
      programmers’ toes. There is nothing worse than getting your piece of a
      program to work and finding out that you inadvertently broke someone
      else’s.</p><div id="ch08note01" data-type="note"><h1>Gem of Wisdom</h1><p>Ruby is a truly object-oriented language, and that is one reason
        we picked it for this book. Objects usually correspond to entities
        that exist in the real world. They encapsulate values and support
        actions as well. While a variable might have a value 5, an object
        named <code>airplane</code> might have one value
        of <code>Boeing 747</code> and another value of
        <code>current location</code>. Also, <code>airplane</code> can have an action that says
        <code>fly()</code> that might change its current
        location based on how far it has flown.</p></div><p>If you and your friend decide to work on a project together, you
      can easily run into trouble. Imagine if your friend makes a variable
      called <code>x</code> and manipulates it. You
      remain unaware of this changing of value. So later on in the code, you
      likewise decide to use a variable called <code>x</code>. Your piece of code and your friend’s piece
      of code both work on their own, but when you integrate them, strange
      problems occur.</p><p>Objects are designed to separate key activities in a program so
      that once you get something to work, you need not constantly worry about
      accidentally breaking it when you make new objects. The activities are
      essentially isolated from one another. They can communicate information
      without the need to know how it is produced and what the specifics of
      the implementation are. For example, a programmer might build an object
      called <code>TicTacToe</code> when making a
      tic-tac-toe board game. Once the part of the program that draws the
      board works, everyone can just communicate with that object in a way
      that ensures that no one steps on another programmer’s toes.</p><p>Objects enable programs to be compartmentalized so that
      programmers can work at the same time without fear of running over one
      another. Consider a construction crew building a house. Someone painting
      one room does not constantly check on the work of someone who is
      painting another room. This is because the rooms are
      compartmentalized—they have walls and ceilings that keep paint from
      dripping from one room to the other. However, two painters working in
      the same room must always be in constant communication to be effective
      and efficient. For example, if they were not communicating, it would be
      possible that one painter could drip paint on the other or paint the
      worker into a corner.</p><?hard-pagebreak?><p>Objects are isolated pieces of code that have their own private
      chunks of data and private actions that can be performed with that data.
      The actions that an object may perform are referred to as
      <em>methods</em>. Object-oriented programming tries to
      create the most logical separation between pieces of code.</p></section><section id="eightdot2dot2_built-in_objects" data-type="sect2"><h2>8.2.2 Built-in Objects</h2><p>Without realizing it, you have been using objects since the moment
      you began to program anything in Ruby. In <a href="#core_programming_elements" data-type="xref"/>, you began using objects when you
      started using variables; you just did not have to think about it. In
      fact, everything in Ruby is an object, and this section will discuss
      some of the more common objects you will use.</p><p>An <em>application programming interface</em>, or
      <em>API</em>, is an interface provided to the programmer to
      allow the use of certain functionality without knowing the specifics of
      the implementation. When you downloaded the Ruby interpreter to your
      hard drive, you probably downloaded a copy of Ruby’s API documentation
      with it, but in case you did not, it is available <a href="http://www.ruby-doc.org/core/">online</a>. If you visit this
      site, you will notice it has three headings: <em>files</em>,
      <em>classes</em>, and <em>methods</em>. For now,
      we will focus on classes.</p><p>A <em>class</em> defines the characteristics and
      behaviors of an object. It contains the variables and the code necessary
      to implement the operations of the object, usually called
      <em>methods</em>. If you look through the list of classes,
      you will see there are many. However, you have already used a few of
      them. Some classes you may have already used are the array, Fixnum,
      float, and string classes. While there are many more classes than these,
      it is not required that you know what they do or what they consist of.
      However, it is required that you know how to use them when the time
      comes.</p><p>For any class, all the supported methods for the class are
      provided.</p><p>For example, the string class (see Figures <a href="#string_api_documentation" data-type="xref"/>
      and <a href="#stringapostrophes_method_length" data-type="xref"/>) has a length method, <code>str.length =&gt; integer</code>. This means that if
      we call the string’s length method, it will return an integer. The next
      part is simply a description of the method, and it does what one would
      expect a length method to do. The following is an example of using this
      method:</p><pre id="pro_id00051" data-type="programlisting" data-code-language="ruby">irb(main):001:0&gt; "hello".length
=&gt; 5</pre><p>Simply put, we call the string class method length on the string
      object “hello,” and we get back the number of characters in “hello,”
      which is 5. This is a simple example of calling, or using, a method.
      However, calling a method is not always this simple. Let’s look at
      another example of a method from the string class.</p><figure id="string_api_documentation" style="float: 0"><img src="figs/cspr_0801.png"/><figcaption>String API documentation</figcaption></figure><figure id="stringapostrophes_method_length" style="float: 0"><img src="figs/cspr_0802.png"/><figcaption>String’s method: length</figcaption></figure><p>The example method in <a href="#stringapostrophes_method_index" data-type="xref"/> is significantly more
      difficult. It shows multiple ways to call the method <code>index</code>, along with the results returned when
      the method is called. By looking at the description of the method taken
      from the actual Ruby documentation website and written on top of the
      example calls, you may be able to decipher how calling this method
      works, but it uses concepts we have not yet discussed. The main concept
      here is that this method needs some type of outside data to work;
      supplying this outside data to a method while calling it is known as
      <em>parameter passing</em>.</p><figure id="stringapostrophes_method_index" style="float: 0"><img src="figs/cspr_0803.png"/><figcaption>String’s method: index</figcaption></figure></section><section id="eightdot2dot3_parameter_passing" data-type="sect2"><h2>8.2.3 Parameter Passing</h2><p>Looking at the list of built-in methods, you will see that the
      syntax for some of them requires a variable in parentheses; these
      variables are called <em>parameters</em>. When using
      built-in methods with parameters, you are sending the value of the
      variable to the method to be manipulated. Consider the imaginary method
      called <code>multiplier</code> in <a href="#parameter_passing" data-type="xref"/>.</p><div id="parameter_passing" data-type="example"><h5>Parameter passing</h5><pre data-type="programlisting" data-code-language="ruby">    1 x = 3
    2 y = x.multiplier(4)
    3 puts "The number is: " + y.to_s
</pre></div><p>Line 1 defines the variable <code>x</code>
      to be 3. The next line assigns a value to <code>y</code> by calling our imaginary method <code>multiplier</code> and passing the value of 4 as a
      parameter. If we looked at the output of this method, it would
      show:</p><pre id="pro_id00052" data-type="programlisting" data-code-language="ruby">The number is: 12</pre><p>By looking at this, you can assume that the method multiplies the
      value of the parameter by a certain value. If we want to find out what
      the <code>multiplier</code> method really does, we
      can change the value of the parameter to 5. After doing this, the
      observed output is:</p><pre id="pro_id00053" data-type="programlisting" data-code-language="ruby">The number is: 15</pre><p>You can now conclude that the <code>multiplier</code> method multiplies the value of the
      parameter by the value of <code>x</code>. The key
      concept of parameters in methods is that it does not matter what value
      is being passed; an output is generated using the same operations within
      the method every time. Think of the method as a black box, as depicted
      in <a href="#black_box_for_multiplier_method" data-type="xref"/>.</p><figure id="black_box_for_multiplier_method" style="float: 0"><img src="figs/cspr_0805.png"/><figcaption>Black box for multiplier method</figcaption></figure><p>The system has an input <code>z</code>, an
      output <code>y</code>, and a black box. The input
      <code>z</code> is sent to the black box, which
      manipulates the variable and then outputs it as <code>y</code>. We do not know, nor do we care, what
      happens inside the black box. The only thing that matters is the
      resultant output.</p><p>Now let’s look at an example using the actual Ruby built-in method
      called <code>split</code>. This method is used
      with strings and splits the strings into array elements based on the
      parameter passed. In this case, this will be the delimiter. Observe the
      example in <a href="#split_example_hash1" data-type="xref"/>.</p><div id="split_example_hash1" data-type="example"><h5>Split example 1</h5><pre data-type="programlisting" data-code-language="ruby">    1 my_string = "Good;day;sir!"
    2 arr = my_string.split(";")
    3 puts arr
    4 
    5 # The following array is created:
    6 # arr[0]: "Good"
    7 # arr[1]: "day"
    8 # arr[2]: "sir!"
</pre></div><ul><li><p>Line 1 defines a string object with the value
          “Good;day;sir!”</p></li><li><p>Line 2 calls the built-in method <code>split</code> with a semicolon as the
          parameter.</p></li><li><p>Line 3 outputs the values of <code>my_array</code>.</p></li></ul><p>After executing the code, the array shown in lines 6–8 will be
      created, and the output will be the following:</p><pre id="pro_id00054" data-type="programlisting" data-code-language="ruby">$ ruby split_1.rb
Good
day
sir!</pre><p>As you can see, the <code>split</code>
      method has created an array with three indices based on the parameter
      passed (in this case, the semicolon). Now, what if we changed the
      parameter of the <code>split</code> method to
      something else, as shown in <a href="#split_example_hash2" data-type="xref"/>?</p><div id="split_example_hash2" data-type="example"><h5>Split example 2</h5><pre data-type="programlisting" data-code-language="ruby">    1 my_string = "Good;day;sir!"
    2 arr = my_string.split("a")
    3 puts arr
    4 
    5 # The following array is created:
    6 # arr[0]: "Good;d"
    7 # arr[1]: "y;sir!"
</pre></div><p>Now the <code>split</code> method will
      perform the same operation, but instead of splitting the string object
      based on the semicolon, it will split the string into array values based
      on the new parameter. The resultant array is once again shown in the
      comments in lines 6 and 7, with the following output:</p><pre id="pro_id00055" data-type="programlisting" data-code-language="ruby">$ ruby split_2.rb
Good;d
y;sir!</pre><p>The <code>split</code> method has created an
      array with two elements based on the parameter <code>a</code>. You can see that no matter what the input
      is, the program will always perform the same operation based on the
      parameter passed. It does not matter what the input is or what is inside
      the method; the <code>split</code> method will
      create arrays splitting your string object wherever there is an
      occurrence of the indicated parameter.</p><p>An astute reader may wonder what would happen if the chosen
      parameter for <code>split</code> did not exist in
      the string, <code>my_string</code>. In this case,
      an array of one element is returned, with the first element containing
      <code>my_string</code>. The code in <a href="#split_example_hash3" data-type="xref"/> illustrates this.</p><p>The output follows from the array’s structure, as shown in line
      6.</p><div id="split_example_hash3" data-type="example"><h5>Split example 3</h5><pre data-type="programlisting" data-code-language="ruby">    1 my_string = "Good;day;sir!"
    2 arr = my_string.split("z")
    3 puts arr
    4 
    5 # The following array is created:
    6 # arr[0]: "Good;day;sir!"
</pre></div><pre id="pro_id00056" data-type="programlisting" data-code-language="ruby">$ ruby split_3.rb
Good;day;sir!</pre></section></section><section id="eightdot3_summary" data-type="sect1"><h1>8.3 Summary</h1><p>Objects and their corresponding methods are the building blocks of
    many of today’s software systems. For all object-oriented programming
    languages, some objects and methods are predefined, and those are always
    specified in the language manuals.</p><p>In that light, we introduced objects, explained built-in objects,
    and discussed parameter passing, a mechanism to transfer information in
    and out of objects.</p><section id="eightdot3dot1_key_concepts" data-type="sect2"><h2>8.3.1 Key Concepts</h2><ul><li><p><em>Classes</em> define the characteristics and
          behaviors of objects belonging to the class.</p></li><li><p><em>Objects</em> are instantiations of a class.
          They have a name and possess all the properties of the class,
          namely, the variables and the methods.</p></li><li><p>The <em>application user interface</em>, or
          <em>API</em>, is an interface used to communicate with
          some underlying functionality.</p></li></ul></section><section id="eightdot3dot2_key_definitions" data-type="sect2"><h2>8.3.2 Key Definitions</h2><ul><li><p><em>Object</em>: An isolated piece of code that
          has its own actions and data.</p></li><li><p><em>Method</em>: The action that an object may
          perform.</p></li><li><p><em>API</em>: An interface provided to the
          programmer to allow the use of certain functionality without knowing
          the specifics of the implementation.</p></li><li><p><em>Class</em>: Construct that contains the
          definition of an object template and the implementation of the
          methods.</p></li><li><p><em>Parameter passing</em>: The passing of data to
          a method within an object.</p></li></ul></section></section><section id="eightdot4_exercises" data-type="sect1"><h1>8.4 Exercises</h1><ol class="qonly"><li><p>Provide code using the <code>split</code>
        method to separate the following string into individual words and then
        display them:</p><pre id="pro_id00057" data-type="programlisting" data-code-language="ruby">my_string = "Roses!are!red!Violets!are!blue"</pre></li><li><p>You are programming part of the sign-up procedure for an online
        computer game. Write a program that prompts the user to enter his or
        her user ID and password and enforces the following
        restrictions:</p><ol type="a"><li><p>User IDs and passwords must be <em>at least</em>
            seven characters in length.</p></li><li><p>Passwords must contain <em>at least</em> one of
            each of the following: uppercase character, lowercase character,
            number, and symbol.</p></li></ol><p>Hint: use the documentation for the string class.</p></li><li><p>Write a program that prompts the user for three words and then
        outputs the total and average number of characters in the three
        words.</p></li><li><p>What would result if you were to type the following into
        <code>irb</code>?</p><pre id="pro_id00058" data-type="programlisting" data-code-language="ruby">irb(main):001:0&gt; "12345".length
irb(main):002:0&gt; "12345" * 5
irb(main):003:0&gt; "12345".index(2)
irb(main):004:0&gt; "12345".index(0)
irb(main):005:0&gt; "12345".index(1)
irb(main):006:0&gt; "12345".index(5)</pre></li><li><p>What does it mean to pass a parameter to a method? What happens
        when a parameter is passed to a method?</p></li><li><p>Write a function multiplier that multiplies the value passed to
        it by <code>x</code>. Have the function ask the
        user for the value of <code>x</code>.</p></li></ol></section></section>